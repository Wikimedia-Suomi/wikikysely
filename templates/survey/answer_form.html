{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% translate 'Answer question' %}{% endblock %}
{% block content %}
<h2>{{ question.text }}</h2>
{% if request.user.is_authenticated %}
<form method="post">
  {% csrf_token %}
  {% if form.non_field_errors %}
    <div class="alert alert-danger">{{ form.non_field_errors }}</div>
  {% endif %}
  {% for field in form.hidden_fields %}
    {{ field }}
  {% endfor %}
  <div class="answer-buttons mb-2" role="group" aria-label="{% translate 'Answer' %}">
    <div class="btn-group me-2" role="group">
      <input type="radio" class="btn-check" name="answer" id="answerYes"
             value="yes" onchange="this.form.submit()"{% if form.answer.value == 'yes' %} checked{% endif %}>
      <label class="btn {% if form.answer.value and is_edit %}{% if form.answer.value == 'yes' %}btn-success{% else %}btn-outline-success{% endif %}{% else %}btn-success{% endif %}" for="answerYes">{% translate 'Yes' %}</label>
      <input type="radio" class="btn-check" name="answer" id="answerNo"
             value="no" onchange="this.form.submit()"{% if form.answer.value == 'no' %} checked{% endif %}>
      <label class="btn {% if form.answer.value and is_edit %}{% if form.answer.value == 'no' %}btn-danger{% else %}btn-outline-danger{% endif %}{% else %}btn-danger{% endif %}" for="answerNo">{% translate 'No' %}</label>
    </div>
    {% if is_edit %}
      <a href="{% url 'survey:survey_detail' %}" class="btn btn-secondary me-2">{% translate 'Cancel' %}</a>
      {% if survey.state == 'running' %}
      <a href="{% url 'survey:answer_delete' form.instance.pk %}" class="btn btn-danger me-2">{% translate 'Remove answer' %}</a>
      {% endif %}
      {% if can_delete_question %}
      <a href="{% url 'survey:question_delete' question.pk %}" class="btn btn-danger">{% translate 'Remove question' %}</a>
      {% endif %}
    {% else %}
      <button type="submit" name="answer" value="" class="btn btn-secondary">{% translate 'Skip' %}</button>
    {% endif %}
  </div>
</form>
{% endif %}
{% endblock %}
